<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Societies Platform - Android Persistence - Societies
	Redmine</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token"
	content="JMAfmcSzh9nqByMBkqpzD7RzT3uWZzg7qmINPKbMSTE=" />
<link rel='shortcut icon' href='/favicon.ico?1310384844' />
<link href="/themes/red-andy/stylesheets/application.css?1304377159"
	media="all" rel="stylesheet" type="text/css" />

<script src="/javascripts/prototype.js?1310384844"
	type="text/javascript"></script>
<script src="/javascripts/effects.js?1310384844" type="text/javascript"></script>
<script src="/javascripts/dragdrop.js?1310384844" type="text/javascript"></script>
<script src="/javascripts/controls.js?1310384844" type="text/javascript"></script>
<script src="/javascripts/application.js?1310384844"
	type="text/javascript"></script>
<script type="text/javascript">
	//         
	//
</script>

<!--[if IE 6]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1310384844);}
    </style>
<![endif]-->
<link rel="stylesheet"
	href="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/jquery.jqplot.min.css"
	type="text/css" />

<script
	src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery-1.4.2.min.js?1318533980"
	type="text/javascript"></script>
<script
	src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery-ui-1.8rc3.custom.min.js?1318533980"
	type="text/javascript"></script>
<script
	src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jeditable.mini.js?1318533980"
	type="text/javascript"></script>
<script
	src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.cookie.js?1318533980"
	type="text/javascript"></script>
<!--[if IE]><script src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/excanvas.js?1318533980" type="text/javascript"></script><![endif]-->
<script
	src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/jquery.jqplot.js?1318533980"
	type="text/javascript"></script>
<script
	src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.highlighter.js?1318533980"
	type="text/javascript"></script>
<script
	src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasTextRenderer.min.js?1318533980"
	type="text/javascript"></script>
<script
	src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasAxisTickRenderer.min.js?1318533980"
	type="text/javascript"></script>
<script
	src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.enhancedLegendRenderer.min.js?1318533980"
	type="text/javascript"></script>

<script
	src="/plugin_assets/redmine_backlogs/javascripts/common.js?1318533980"
	type="text/javascript"></script>
<script
	src="/plugin_assets/redmine_backlogs/javascripts/burndown.js?1318533980"
	type="text/javascript"></script>


<!-- page specific tags -->

<link href="/stylesheets/scm.css?1310384844" media="screen"
	rel="stylesheet" type="text/css" />
</head>
<body class="theme-Red-andy controller-wiki action-show">
	<div id="wrapper">

			<div id="header">



			</div>

			<div class="" id="main">

				<div id="content">

					<div class="wiki">
						<a name="Android-Persistence"></a>
						<h1>
							Android Persistence<a href="#Android-Persistence"
								class="wiki-anchor">&para;</a>
						</h1>


						<a name="Types-of-data-persistence"></a>
						<h2>
							Types of data persistence<a href="#Types-of-data-persistence"
								class="wiki-anchor">&para;</a>
						</h2>


						<p>
							In common with all operating systems, Android has several ways of
							persisting data so that apps can persist state and relevant data.
							The main ways of doing so are via files or databases. All
							applications on an Android device can store data via these two
							methods in the application's designated area and on the SDCard
							area (removable memory) although using the SDCard option requires
							that the app has the "android.permission.WRITE_EXTERNAL_STORAGE"
							permission in its manifest declaration. It is not possible for
							one application to access another's data area due to the sandbox
							architecture of Android, although it is possible for one
							application to share data via Intents, remote service invocation
							and Content Provider components. For more details consult: <a
								class="external"
								href="http://developer.android.com/guide/topics/data/data-storage.html">http://developer.android.com/guide/topics/data/data-storage.html</a>
						</p>


						<a name="Files"></a>
						<h3>
							Files<a href="#Files" class="wiki-anchor">&para;</a>
						</h3>


						<p>
							Data can be written and retrieved by an application using file(s)
							but this method is limited as the files have to be read
							sequentially to access data. A more specialised and useful use of
							files is available by using Preferences (<a class="external"
								href="http://developer.android.com/reference/android/preference/package-summary.html">http://developer.android.com/reference/android/preference/package-summary.html</a>).
							The Preferences API is available to construct, display, read and
							update application parameters or preferences with the declaration
							of preferences handled through XML definitions. Android takes
							care of the presentation details, input and persistence of these
							preferences.
						</p>


						<a name="Databases"></a>
						<h3>
							Databases<a href="#Databases" class="wiki-anchor">&para;</a>
						</h3>


						<p>
							It is possible to use any database that could be reasonably
							expected to run on a constrained Android device but SQLite (<a
								class="external" href="http://www.sqlite.org/">http://www.sqlite.org/</a>)
							is available as the default database supported by an Android API.
							SQLite is a single file, single user type database but supports
							most of SQL92, transactions and is cross platform compatible.It
							is possible to create and drop databases programatically or use
							the SQLite3 command via adb to interact with rooted devices and
							AVDs. Data can be dynamically written to SQLite databases as part
							of the normal application operation or a database could be
							created statically using the application resource route, i.e. a
							database can be created from previously created data compiled
							into the application.
						</p>


						<a name="Android-Societies-Client-application"></a>
						<h2>
							Android Societies Client application<a
								href="#Android-Societies-Client-application" class="wiki-anchor">&para;</a>
						</h2>


						<p>This application is currently using an SQLite database and
							Preferences to store data. It is planned to expose relevant data
							with a defined access control policy to other Societies apps (if
							required) and 3rd party apps.</p>


						<a name="Preferences"></a>
						<h3>
							Preferences<a href="#Preferences" class="wiki-anchor">&para;</a>
						</h3>


						<p>
							The application's preferences are stored via the Android
							Preference API which has no restrictions on the number of
							preferences that can be displayed and stored. As more application
							parameters are found they can be entered into the <a
								class="external"
								href="https://github.com/societies/SOCIETIES-Platform/blob/development/platform-infrastructure/client-frwk/MasterGUI/res/xml/preferences.xml">https://github.com/societies/SOCIETIES-Platform/blob/development/platform-infrastructure/client-frwk/MasterGUI/res/xml/preferences.xml</a>
							file and organised appropriately.
						</p>


						<p>
							The preferences can be accessed by any native component within
							the application by using the following Android invocation:<br />
							<pre>
PreferenceManager.getDefaultSharedPreferences()
</pre>
						</p>


						<p>In the case of Javascript support for the HTML GUI
							components, there is currently an API to read and update
							preferences:</p>


						<pre>
Namespace Societies.AppPreferences

Societies.AppPreferences
Defined in: reference.js.
Namespace Summary       
Societies.AppPreferences
Provides an API to retrieve application preferences
Method Summary       
Societies.AppPreferences.getBooleanPrefValue(successCallback, failureCallback, prefName)
Retrieve a Boolean preference value for a given preference name

Societies.AppPreferences.getFloatPrefValue(successCallback, failureCallback, prefName)
Retrieve a Float preference value for a given preference name

Societies.AppPreferences.getIntegerPrefValue(successCallback, failureCallback, prefName)
Retrieve an Integer preference value for a given preference name

Societies.AppPreferences.getLongPrefValue(successCallback, failureCallback, prefName)
Retrieve a Long preference value for a given preference name

Societies.AppPreferences.getStringPrefValue(successCallback, failureCallback, prefName)
Retrieve a String preference value for a given preference name

Societies.AppPreferences.putStringPrefValue(successCallback, failureCallback, prefName, value)
Retrieve a String preference value for a given preference name

</pre>

						<a name="Database"></a>
						<h3>
							Database<a href="#Database" class="wiki-anchor">&para;</a>
						</h3>


						<p>
							Data other than application preferences will be stored in an
							SQLite database. The class, <a class="external"
								href="https://github.com/societies/SOCIETIES-Platform/blob/development/platform-infrastructure/client-frwk/SocietiesContentProvider/src/org/societies/android/platform/content/DBHelper.java">https://github.com/societies/SOCIETIES-Platform/blob/development/platform-infrastructure/client-frwk/SocietiesContentProvider/src/org/societies/android/platform/content/DBHelper.java</a>
							, handles the creation and updating of the database. Any
							components that wish to store data should provide extra table
							information in the manner that the CSSManager tables that are
							currently described in this class.
						</p>


						<p>
							Each component will also need to create at least one, maybe more,
							Data Access Object (DAO) type classes, in order to describe how
							to add, update and delete data from relevant tables. The class, <a
								class="external"
								href="https://github.com/societies/SOCIETIES-Platform/blob/development/platform-infrastructure/client-frwk/SocietiesContentProvider/src/org/societies/android/platform/content/CssRecordDAO.java">https://github.com/societies/SOCIETIES-Platform/blob/development/platform-infrastructure/client-frwk/SocietiesContentProvider/src/org/societies/android/platform/content/CssRecordDAO.java</a>
							, can be used as template or example.
						</p>


						<a name="Database-JUnit-Testing"></a>
						<h2>
							Database JUnit Testing<a href="#Database-JUnit-Testing"
								class="wiki-anchor">&para;</a>
						</h2>


						<p>
							It is possible to unit test database DAO classes using normal
							Android JUnit testing. The projects,<a class="external"
								href="https://github.com/societies/SOCIETIES-Platform/tree/development/platform-infrastructure/client-frwk/SocietiesContentProvider">https://github.com/societies/SOCIETIES-Platform/tree/development/platform-infrastructure/client-frwk/SocietiesContentProvider</a>
							, <a class="external"
								href="https://github.com/societies/SOCIETIES-Platform/tree/development/platform-infrastructure/client-frwk/APKLIBContainer">https://github.com/societies/SOCIETIES-Platform/tree/development/platform-infrastructure/client-frwk/APKLIBContainer</a>
							and <a class="external"
								href="https://github.com/societies/SOCIETIES-Platform/tree/development/platform-infrastructure/client-frwk/TestAPKLIBContainer">https://github.com/societies/SOCIETIES-Platform/tree/development/platform-infrastructure/client-frwk/TestAPKLIBContainer</a>
							illustrate how to do this and also illustrate how to test
							components developed as APKLIBs.
						</p>
					</div>


					<div style="clear: both;"></div>
				</div>
			</div>

			<div id="ajax-indicator" style="display: none;">
				<span>Loading...</span>
			</div>
		</div>

</body>
</html>
