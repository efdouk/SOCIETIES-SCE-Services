<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pm="http://primefaces.org/mobile" contentType="text/html">

	<pm:page title="Networking Zone">
		<pm:view id="viewMain">
		
			<f:event listener="#{mainBean.checkinit}" type="preRenderView" />
			<f:event listener="#{profileBean.loadprofile}" type="preRenderView" />
	
	
			<pm:header title="Networking Zones" />
			<pm:content>

				<!-- This dialog will display if the user hasn't setup a profile
			It directs them to the Profile Page -->
				<p:confirmDialog id="confirmDialog"
					message="Please set up a profie so that you can interact with other users"
					header="Welcome To networking Zone" severity="alert"
					rendered="#{profileBean.profilemissing}">
					<p:commandButton id="confirm" value="OK" action="gotoprofile" />
				</p:confirmDialog>

				
				<!--  seperate tab -->
				<p:tab title="Zones">
					You are currently located in the <b>"#{mainBean.zoneName}"</b>, as shown in the image below.<br/>
					Click on the image to retrieve this Zone's Information<br/>
					
					<h:form>
					<div style="text-align:center; position: relative; left: 0; top: 0;" id="zoneImg">
					<p:commandLink action="gotozone" >
						<p:graphicImage value="/images/basiczone.png" style="position: relative; top: 0; left: 0; width: 300; height: 225;" />
					</p:commandLink>
					<p:graphicImage value="#{profileBean.avatar}" style="position: absolute; top: #{mainBean.zoneImageTop}; left: #{mainBean.zoneImageLeft}; width: 50; height: auto" id="profileImage"/>
					</div>
					</h:form>
				
				</p:tab>
				
				<p:accordionPanel>
					<p:tab title="Conference Members">
					This is a list of all conference members.<br/>
					
						<h:form id="form">
							<p:dataTable id="mainroomlist" value="#{mainPeopleBean.suggestions}" var="mainperson" >
								<p:column style="width:10%"><p:graphicImage value="/images/profile_pic.jpg"  width="50" height="45" /> </p:column>
								<p:column style="width:20%" headerText="Name" > #{mainperson.displayName}</p:column>
								<p:column style="width:30%" headerText="Zone" > #{mainperson.zone} </p:column>
								<p:column headerText="Relevance">
									<p:graphicImage value="/images/learning.jpg"  width="25" height="18" rendered="#{peopleBean.isperftagged(mainperson)}"/>
									<p:graphicImage value="/images/learning2.jpg"  width="25" height="18" rendered="#{peopleBean.isinteresttagged(mainperson)}"/>
									<p:graphicImage value="/images/facebook-col.png"  width="25" height="18" rendered="#{peopleBean.isfacebooktagged(mainperson)}"/>		
									<p:graphicImage value="/images/linkedin-col.png"  width="25" height="18" rendered="#{peopleBean.islinkedtagged(mainperson)}"/>		
								</p:column>
								
							</p:dataTable>
							
							<p:poll interval="30" listener="#{mainbean.updatepeoplelist}" update="mainroomlist" />
							
						</h:form>
					</p:tab>
				</p:accordionPanel>

				<p:commandButton icon="back" value="Your Profile" action="gotoprofile" />
			</pm:content>
		</pm:view>
		
	</pm:page>
</f:view>


